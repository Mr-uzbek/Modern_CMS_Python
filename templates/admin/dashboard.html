{% extends "admin/base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="page-header">
    <h1>Dashboard</h1>
    <p>Tizim statistikasi va boshqaruv</p>
</div>

<!-- Stats Cards -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #6366f1, #8b5cf6);"><i
                class="fas fa-newspaper"></i></div>
        <div class="stat-info">
            <h3>{{ stats.posts_count }}</h3>
            <p>Maqolalar</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #22c55e, #16a34a);"><i
                class="fas fa-users"></i></div>
        <div class="stat-info">
            <h3>{{ stats.users_count }}</h3>
            <p>Foydalanuvchilar</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #0ea5e9, #0284c7);"><i
                class="fas fa-comments"></i></div>
        <div class="stat-info">
            <h3>{{ stats.comments_count }}</h3>
            <p>Izohlar</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);"><i class="fas fa-eye"></i>
        </div>
        <div class="stat-info">
            <h3>{{ stats.views_count }}</h3>
            <p>Ko'rishlar</p>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div class="admin-grid">
    <div class="admin-card">
        <div class="card-header">
            <h2><i class="fas fa-clock"></i> So'nggi maqolalar</h2>
            <a href="/admin/posts" class="btn btn-sm">Barchasi</a>
        </div>
        <div class="card-body">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>Sarlavha</th>
                        <th>Muallif</th>
                        <th>Sana</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for post in recent_posts %}
                    <tr>
                        <td><a href="/admin/posts/{{ post.id }}">{{ post.title[:40] }}...</a></td>
                        <td>{{ post.author.username }}</td>
                        <td>{{ post.created_at.strftime('%d.%m.%Y') }}</td>
                        <td><span class="badge {{ 'badge-success' if post.is_published else 'badge-warning' }}">{{
                                'Faol' if post.is_published else 'Qoralama' }}</span></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="admin-card">
        <div class="card-header">
            <h2><i class="fas fa-comments"></i> So'nggi izohlar</h2>
            <a href="/admin/comments" class="btn btn-sm">Barchasi</a>
        </div>
        <div class="card-body">
            <div class="comments-list">
                {% for comment in recent_comments %}
                <div class="comment-item">
                    <img src="{{ comment.author.avatar if comment.author else '/static/images/default-avatar.png' }}"
                        alt="">
                    <div class="comment-info">
                        <strong>{{ comment.author.username if comment.author else comment.guest_name }}</strong>
                        <p>{{ comment.content[:60] }}...</p>
                        <small>{{ comment.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}